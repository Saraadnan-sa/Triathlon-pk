<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Table</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>

<h2>Our Services</h2>
<table id="serviceTable">
    <thead>
        <tr id="tableHeaderRow">
            <th id="checkboxHeader" style="display: none;"></th>
            <th>Service</th>
            <th>Details</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<button id="addItemButton">Add New Item</button>
<button id="removeItemButton">Remove Item</button>

<script>
    let removeMode = false;

    // Function to load table data from local storage
    function loadTableData() {
        const tableBody = document.querySelector('#serviceTable tbody');
        tableBody.innerHTML = '';

        const services = JSON.parse(localStorage.getItem('services')) || [];

        services.forEach((service, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                ${removeMode ? `<td class="checkbox-column"><input type="checkbox" class="rowCheckbox" data-index="${index}"></td>` : ''}
                <td>${service.name}</td>
                <td>${service.details}</td>
                <td>${service.price}</td>
            `;
            tableBody.appendChild(row);
        });

        const checkboxHeader = document.getElementById('checkboxHeader');
        checkboxHeader.style.display = removeMode ? "" : "none";
    }

    // Function to add a new item
    document.getElementById('addItemButton').addEventListener('click', () => {
        const serviceName = prompt("Enter Service Name:");
        const serviceDetails = prompt("Enter Service Details:");
        const servicePrice = prompt("Enter Service Price:");

        if (serviceName && serviceDetails && servicePrice) {
            const services = JSON.parse(localStorage.getItem('services')) || [];
            services.push({ name: serviceName, details: serviceDetails, price: servicePrice });
            localStorage.setItem('services', JSON.stringify(services));
            loadTableData();
        }
    });

    // Toggle remove mode
    document.getElementById('removeItemButton').addEventListener('click', () => {
        if (!removeMode) {
            removeMode = true;
            document.getElementById('removeItemButton').textContent = "Delete Selected";
        } else {
            deleteSelectedRows();
            removeMode = false;
            document.getElementById('removeItemButton').textContent = "Remove Item";
        }
        loadTableData();
    });

    // Delete selected rows
    function deleteSelectedRows() {
        let services = JSON.parse(localStorage.getItem('services')) || [];
        const checkboxes = document.querySelectorAll('.rowCheckbox:checked');

        // Filter out unchecked items
        const indicesToDelete = Array.from(checkboxes).map(checkbox => parseInt(checkbox.dataset.index));
        services = services.filter((_, index) => !indicesToDelete.includes(index));

        localStorage.setItem('services', JSON.stringify(services));
    }

    loadTableData();
</script>

</body>
</html>
